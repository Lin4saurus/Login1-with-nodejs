<div class="register-container">
  <div class="register-image">
    <img src="assets/images/1200.jpg" alt="AirTM" />
  </div>
  
  <div class="register-form">
    <h2>CREA TU CUENTA</h2>

    <!-- Botones de registro social -->
    <div class="social-register">
      <button class="social-btn google">
        <span>Google</span>
      </button>
      <button class="social-btn facebook">
        <span>Facebook</span>
      </button>
      <button class="social-btn apple">
        <span>Apple</span>
      </button>
    </div>

    <div class="divider">
      <hr>
      <span>o</span>
      <hr>
    </div>

    <!-- Formulario de registro -->
    <form (ngSubmit)="onRegister()" #registerForm="ngForm">
      <div class="form-group">
        <label for="username">Nombre de usuario</label>
        <input 
          type="text" 
          id="username"
          [(ngModel)]="formData.username" 
          name="username" 
          placeholder="Ingresa tu nombre de usuario"
          required
          minlength="3"
          maxlength="20"
          pattern="[a-zA-Z0-9_]+"
          #usernameInput="ngModel"
          class="form-control"
        >
        <div *ngIf="usernameInput.invalid && usernameInput.touched" class="error">
          <span *ngIf="usernameInput.errors?.['required']">Usuario es requerido</span>
          <span *ngIf="usernameInput.errors?.['minlength']">Mínimo 3 caracteres</span>
          <span *ngIf="usernameInput.errors?.['maxlength']">Máximo 20 caracteres</span>
          <span *ngIf="usernameInput.errors?.['pattern']">Solo letras, números y guiones bajos</span>
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input 
          type="email" 
          id="email"
          [(ngModel)]="formData.email" 
          name="email" 
          placeholder="Ingresa tu correo"
          required
          pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
          #emailInput="ngModel"
          class="form-control"
        >
        <div *ngIf="emailInput.invalid && emailInput.touched" class="error">
          <span *ngIf="emailInput.errors?.['required']">Email es requerido</span>
          <span *ngIf="emailInput.errors?.['pattern']">Formato de email inválido</span>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Contraseña</label>
        <input 
          type="password" 
          id="password"
          [(ngModel)]="formData.password" 
          name="password" 
          placeholder="Ingresa tu contraseña"
          required
          minlength="6"
          maxlength="20"
          #passwordInput="ngModel"
          class="form-control"
        >
        <div *ngIf="passwordInput.invalid && passwordInput.touched" class="error">
          <span *ngIf="passwordInput.errors?.['required']">Contraseña es requerida</span>
          <span *ngIf="passwordInput.errors?.['minlength']">Mínimo 6 caracteres</span>
          <span *ngIf="passwordInput.errors?.['maxlength']">Máximo 20 caracteres</span>
        </div>
        <small class="password-hint">La contraseña debe tener entre 6 y 20 caracteres</small>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmar contraseña</label>
        <input 
          type="password" 
          id="confirmPassword"
          [(ngModel)]="confirmPassword" 
          name="confirmPassword" 
          placeholder="Confirma tu contraseña"
          required
          #confirmPasswordInput="ngModel"
          class="form-control"
        >
        <div *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched && formData.password !== confirmPassword" class="error">
          Las contraseñas no coinciden
        </div>
      </div>

      <div class="form-group checkbox-group">
        <label class="checkbox-label">
          <input 
            type="checkbox" 
            name="terms"
            [(ngModel)]="acceptTerms"
            required
            #termsInput="ngModel"
            class="checkbox-input"
          >
          <span class="checkmark"></span>
          Acepto los <a href="#" (click)="$event.preventDefault()">Términos de servicio</a> y <a href="#" (click)="$event.preventDefault()">Política de privacidad</a>
        </label>
        <div *ngIf="termsInput.invalid && termsInput.touched" class="error">
          Debes aceptar los términos y condiciones
        </div>
      </div>

      <button 
        type="submit" 
        [disabled]="!registerForm.form.valid || isLoading || !isPasswordMatch || !acceptTerms"
        class="btn-register"
      >
        <span *ngIf="!isLoading">Crear cuenta</span>
        <span *ngIf="isLoading">Registrando...</span>
      </button>
    </form>

    <!-- Modal de error -->
    <div *ngIf="showErrorModal" class="error-modal-overlay" (click)="closeErrorModal()">
      <div class="error-modal" (click)="$event.stopPropagation()">
        <div class="error-modal-header">
          <h3>Error</h3>
          <button class="error-modal-close" (click)="closeErrorModal()">&times;</button>
        </div>
        <div class="error-modal-body">
          <p>{{ errorMessage }}</p>
        </div>
        <div class="error-modal-footer">
          <button class="error-modal-btn" (click)="closeErrorModal()">Aceptar</button>
        </div>
      </div>
    </div>

    <div class="login-link">
      <p>¿Ya tienes cuenta? <a routerLink="/login">Inicia sesión</a></p>
    </div>
  </div>
</div>